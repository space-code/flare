name: Publish Page Action

inputs:
  target:
    required: true
    type: string
  base_path:
    required: true
    type: string

runs:
  using: "composite"

  steps:
    - name: Build DocC
      shell: bash
      run: |
        swift build;
        swift package \
          --allow-writing-to-directory ./docs \
          generate-documentation \
          --target ${{ inputs.target }} \
          --output-path ./docs \
          --transform-for-static-hosting \
          --hosting-base-path ${{ inputs.base_path }};

    - name: Setup Pages
      id: pages
      uses: actions/configure-pages@v3

    - name: Upload artifact
      uses: actions/upload-artifact@v4
      with:
        path: docs