{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/flareui\/handling-transactions"]}],"hierarchy":{"paths":[["doc:\/\/flare.FlareUI\/documentation\/FlareUI"],["doc:\/\/flare.FlareUI\/documentation\/FlareUI","doc:\/\/flare.FlareUI\/documentation\/FlareUI\/displaying-products"]]},"metadata":{"role":"article","modules":[{"name":"FlareUI"}],"roleHeading":"Article","title":"Handling Transactions"},"schemaVersion":{"patch":0,"minor":3,"major":0},"sections":[],"kind":"article","identifier":{"interfaceLanguage":"swift","url":"doc:\/\/flare.FlareUI\/documentation\/FlareUI\/handling-transactions"},"primaryContentSections":[{"content":[{"text":"Overview","anchor":"Overview","type":"heading","level":2},{"inlineContent":[{"text":"Views provide a handy way to handle completed or failed transactions using ","type":"text"},{"type":"codeVoice","code":"SwiftUI\/View\/onInAppPurchaseCompletion(completion:)"},{"text":" or ","type":"text"},{"identifier":"doc:\/\/flare.FlareUI\/documentation\/FlareUI\/ProductsViewController\/onInAppPurchaseCompletion","type":"reference","isActive":true},{"text":".","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ SwiftUI","","ProductsView(ids: [\"com.company.product_id_1\", \"com.company.product_id_2\"])","    .onInAppPurchaseCompletion { result in","        switch result {","        case let .success(transaction):","            \/\/ Handle the transaction","","            \/\/ IMPORTANT: Finish the transaction","        case let .failure(error):","            \/\/ Handle the error","        }","    }"],"type":"codeListing"},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Once you’ve handled a transaction, don’t forget to finish it using "},{"isActive":true,"identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/iflare\/finish(transaction:completion:)","type":"reference"},{"type":"text","text":". Read more about "},{"isActive":true,"identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/perform-purchase","type":"reference"},{"type":"text","text":"."}]}],"name":"Important","type":"aside","style":"important"},{"syntax":"swift","code":["\/\/ UIKit","","let subscriptionsVC = SubscriptionsViewController(ids: [\"com.company.subscription_id_1\"])","subscriptionsVC.onInAppPurchaseCompletion = { result in ","    switch result {","    case let .success(transaction):","        \/\/ Handle the transaction","","        \/\/ IMPORTANT: Finish the transaction","    case let .failure(error):","        \/\/ Handle the error","    }","}"],"type":"codeListing"}],"kind":"content"}],"abstract":[{"text":"Learn how to handle transactions.","type":"text"}],"references":{"doc://flare.FlareUI/documentation/FlareUI":{"kind":"symbol","identifier":"doc:\/\/flare.FlareUI\/documentation\/FlareUI","role":"collection","type":"topic","url":"\/documentation\/flareui","abstract":[{"text":"Display a customizable in-app purchase store using StoreKit views for UIKit and SwiftUI.","type":"text"}],"title":"FlareUI"},"doc://flare.FlareUI/documentation/FlareUI/displaying-products":{"role":"collectionGroup","type":"topic","kind":"article","identifier":"doc:\/\/flare.FlareUI\/documentation\/FlareUI\/displaying-products","url":"\/documentation\/flareui\/displaying-products","abstract":[{"type":"text","text":"Learn how to display a set of products to a user."}],"title":"Displaying Products"},"doc://flare.FlareUI/documentation/FlareUI/ProductsViewController/onInAppPurchaseCompletion":{"role":"symbol","url":"\/documentation\/flareui\/productsviewcontroller\/oninapppurchasecompletion","title":"onInAppPurchaseCompletion","type":"topic","kind":"symbol","abstract":[{"type":"text","text":"A completion handler for in-app purchase events."}],"fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"onInAppPurchaseCompletion"},{"kind":"text","text":": "},{"preciseIdentifier":"s:7FlareUI25PurchaseCompletionHandlera","kind":"typeIdentifier","text":"PurchaseCompletionHandler"},{"kind":"text","text":"?"}],"identifier":"doc:\/\/flare.FlareUI\/documentation\/FlareUI\/ProductsViewController\/onInAppPurchaseCompletion"},"https://space-code.github.io/flare/flare/documentation/flare/iflare/finish(transaction:completion:)":{"identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/iflare\/finish(transaction:completion:)","type":"link","titleInlineContent":[{"text":"Finish Method","type":"text"}],"title":"Finish Method","url":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/iflare\/finish(transaction:completion:)"},"https://space-code.github.io/flare/flare/documentation/flare/perform-purchase":{"identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/perform-purchase","type":"link","titleInlineContent":[{"text":"Finishing Transactions","type":"text"}],"title":"Finishing Transactions","url":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/perform-purchase"}}}