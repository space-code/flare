{"schemaVersion":{"minor":3,"major":0,"patch":0},"sections":[],"abstract":[{"text":"Learn how to handle transactions.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/FlareUI\/documentation\/FlareUI"]]},"kind":"article","metadata":{"roleHeading":"Article","modules":[{"name":"FlareUI"}],"role":"article","title":"Handling Transactions"},"primaryContentSections":[{"content":[{"level":2,"anchor":"Overview","type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Views provide a handy way to handle completed or failed transactions using "},{"identifier":"doc:\/\/FlareUI\/documentation\/FlareUI\/SwiftUI\/View\/onInAppPurchaseCompletion(completion:)","isActive":true,"type":"reference"},{"type":"text","text":" or "},{"type":"reference","identifier":"doc:\/\/FlareUI\/documentation\/FlareUI\/ProductsViewController\/onInAppPurchaseCompletion","isActive":true},{"text":".","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["\/\/ SwiftUI","","ProductsView(ids: [\"com.company.product_id_1\", \"com.company.product_id_2\"])","    .onInAppPurchaseCompletion { result in","        switch result {","        case let .success(transaction):","            \/\/ Handle the transaction","","            \/\/ IMPORTANT: Finish the transaction","        case let .failure(error):","            \/\/ Handle the error","        }","    }"]},{"name":"Important","content":[{"inlineContent":[{"type":"text","text":"Once you’ve handled a transaction, don’t forget to finish it using "},{"type":"reference","identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/iflare\/finish(transaction:completion:)","isActive":true},{"type":"text","text":". Read more about "},{"identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/perform-purchase","isActive":true,"type":"reference"},{"type":"text","text":"."}],"type":"paragraph"}],"type":"aside","style":"important"},{"code":["\/\/ UIKit","","let subscriptionsVC = SubscriptionsViewController(ids: [\"com.company.subscription_id_1\"])","subscriptionsVC.onInAppPurchaseCompletion = { result in ","    switch result {","    case let .success(transaction):","        \/\/ Handle the transaction","","        \/\/ IMPORTANT: Finish the transaction","    case let .failure(error):","        \/\/ Handle the error","    }","}"],"type":"codeListing","syntax":"swift"}],"kind":"content"}],"variants":[{"paths":["\/documentation\/flareui\/handling-transactions"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/FlareUI\/documentation\/FlareUI\/handling-transactions"},"references":{"doc://FlareUI/documentation/FlareUI":{"abstract":[{"type":"text","text":"Display a customizable in-app purchase store using StoreKit views for UIKit and SwiftUI."}],"identifier":"doc:\/\/FlareUI\/documentation\/FlareUI","role":"collection","kind":"symbol","url":"\/documentation\/flareui","type":"topic","title":"FlareUI"},"https://space-code.github.io/flare/flare/documentation/flare/iflare/finish(transaction:completion:)":{"identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/iflare\/finish(transaction:completion:)","title":"Finish Method","url":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/iflare\/finish(transaction:completion:)","titleInlineContent":[{"type":"text","text":"Finish Method"}],"type":"link"},"doc://FlareUI/documentation/FlareUI/ProductsViewController/onInAppPurchaseCompletion":{"kind":"symbol","url":"\/documentation\/flareui\/productsviewcontroller\/oninapppurchasecompletion","role":"symbol","title":"onInAppPurchaseCompletion","fragments":[{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"kind":"identifier","text":"onInAppPurchaseCompletion"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:7FlareUI25PurchaseCompletionHandlera","text":"PurchaseCompletionHandler"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"A completion handler for in-app purchase events."}],"identifier":"doc:\/\/FlareUI\/documentation\/FlareUI\/ProductsViewController\/onInAppPurchaseCompletion","type":"topic"},"doc://FlareUI/documentation/FlareUI/SwiftUI/View/onInAppPurchaseCompletion(completion:)":{"type":"topic","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"onInAppPurchaseCompletion"},{"kind":"text","text":"("},{"text":"completion","kind":"externalParam"},{"text":": ((","kind":"text"},{"text":"StoreProduct","preciseIdentifier":"c:@M@Flare@objc(cs)StoreProduct","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:s6ResultO","text":"Result"},{"text":"<","kind":"text"},{"kind":"typeIdentifier","text":"StoreTransaction","preciseIdentifier":"s:5Flare16StoreTransactionC"},{"kind":"text","text":", any "},{"text":"Error","kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP"},{"text":">) -> ","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":")?) -> ","kind":"text"},{"kind":"keyword","text":"some"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"View","preciseIdentifier":"s:7SwiftUI4ViewP"}],"identifier":"doc:\/\/FlareUI\/documentation\/FlareUI\/SwiftUI\/View\/onInAppPurchaseCompletion(completion:)","url":"\/documentation\/flareui\/swiftui\/view\/oninapppurchasecompletion(completion:)","abstract":[{"text":"Sets a completion handler for in-app purchase transactions.","type":"text"}],"kind":"symbol","title":"onInAppPurchaseCompletion(completion:)","role":"symbol"},"https://space-code.github.io/flare/flare/documentation/flare/perform-purchase":{"identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/perform-purchase","title":"Finishing Transactions","type":"link","url":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/perform-purchase","titleInlineContent":[{"type":"text","text":"Finishing Transactions"}]}}}