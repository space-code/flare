{"primaryContentSections":[{"content":[{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"text":"Views provide a handy way to handle completed or failed transactions using ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/FlareUI\/documentation\/FlareUI\/SwiftUI\/View\/onInAppPurchaseCompletion(completion:)"},{"text":" or ","type":"text"},{"identifier":"doc:\/\/FlareUI\/documentation\/FlareUI\/ProductsViewController\/onInAppPurchaseCompletion","isActive":true,"type":"reference"},{"type":"text","text":"."}]},{"type":"codeListing","syntax":"swift","code":["\/\/ SwiftUI","","ProductsView(ids: [\"com.company.product_id_1\", \"com.company.product_id_2\"])","    .onInAppPurchaseCompletion { result in","        switch result {","        case let .success(transaction):","            \/\/ Handle the transaction","","            \/\/ IMPORTANT: Finish the transaction","        case let .failure(error):","            \/\/ Handle the error","        }","    }"]},{"type":"aside","content":[{"inlineContent":[{"text":"Once you’ve handled a transaction, don’t forget to finish it using ","type":"text"},{"isActive":true,"identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/iflare\/finish(transaction:completion:)","type":"reference"},{"text":". Read more about ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/perform-purchase"},{"text":".","type":"text"}],"type":"paragraph"}],"name":"Important","style":"important"},{"type":"codeListing","syntax":"swift","code":["\/\/ UIKit","","let subscriptionsVC = SubscriptionsViewController(ids: [\"com.company.subscription_id_1\"])","subscriptionsVC.onInAppPurchaseCompletion = { result in ","    switch result {","    case let .success(transaction):","        \/\/ Handle the transaction","","        \/\/ IMPORTANT: Finish the transaction","    case let .failure(error):","        \/\/ Handle the error","    }","}"]}],"kind":"content"}],"metadata":{"title":"Handling Transactions","role":"article","roleHeading":"Article","modules":[{"name":"FlareUI"}]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/FlareUI\/documentation\/FlareUI\/handling-transactions"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/flareui\/handling-transactions"]}],"abstract":[{"text":"Learn how to handle transactions.","type":"text"}],"kind":"article","schemaVersion":{"major":0,"patch":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/FlareUI\/documentation\/FlareUI"]]},"sections":[],"references":{"doc://FlareUI/documentation/FlareUI":{"type":"topic","role":"collection","url":"\/documentation\/flareui","abstract":[{"text":"Display a customizable in-app purchase store using StoreKit views for UIKit and SwiftUI.","type":"text"}],"kind":"symbol","title":"FlareUI","identifier":"doc:\/\/FlareUI\/documentation\/FlareUI"},"https://space-code.github.io/flare/flare/documentation/flare/perform-purchase":{"titleInlineContent":[{"type":"text","text":"Finishing Transactions"}],"identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/perform-purchase","url":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/perform-purchase","type":"link","title":"Finishing Transactions"},"https://space-code.github.io/flare/flare/documentation/flare/iflare/finish(transaction:completion:)":{"title":"Finish Method","identifier":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/iflare\/finish(transaction:completion:)","titleInlineContent":[{"text":"Finish Method","type":"text"}],"type":"link","url":"https:\/\/space-code.github.io\/flare\/flare\/documentation\/flare\/iflare\/finish(transaction:completion:)"},"doc://FlareUI/documentation/FlareUI/ProductsViewController/onInAppPurchaseCompletion":{"identifier":"doc:\/\/FlareUI\/documentation\/FlareUI\/ProductsViewController\/onInAppPurchaseCompletion","role":"symbol","type":"topic","url":"\/documentation\/flareui\/productsviewcontroller\/oninapppurchasecompletion","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"onInAppPurchaseCompletion"},{"text":": ","kind":"text"},{"text":"PurchaseCompletionHandler","preciseIdentifier":"s:7FlareUI25PurchaseCompletionHandlera","kind":"typeIdentifier"},{"text":"?","kind":"text"}],"title":"onInAppPurchaseCompletion","kind":"symbol","abstract":[{"type":"text","text":"A completion handler for in-app purchase events."}]},"doc://FlareUI/documentation/FlareUI/SwiftUI/View/onInAppPurchaseCompletion(completion:)":{"identifier":"doc:\/\/FlareUI\/documentation\/FlareUI\/SwiftUI\/View\/onInAppPurchaseCompletion(completion:)","url":"\/documentation\/flareui\/swiftui\/view\/oninapppurchasecompletion(completion:)","type":"topic","role":"symbol","abstract":[{"text":"Sets a completion handler for in-app purchase transactions.","type":"text"}],"title":"onInAppPurchaseCompletion(completion:)","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"onInAppPurchaseCompletion"},{"text":"(","kind":"text"},{"text":"completion","kind":"externalParam"},{"text":": ((","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"c:@M@Flare@objc(cs)StoreProduct","text":"StoreProduct"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:s6ResultO","text":"Result","kind":"typeIdentifier"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"StoreTransaction","preciseIdentifier":"s:5Flare16StoreTransactionC"},{"text":", any ","kind":"text"},{"preciseIdentifier":"s:s5ErrorP","kind":"typeIdentifier","text":"Error"},{"kind":"text","text":">) -> "},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":")?) -> ","kind":"text"},{"text":"some","kind":"keyword"},{"text":" ","kind":"text"},{"preciseIdentifier":"s:7SwiftUI4ViewP","kind":"typeIdentifier","text":"View"}],"kind":"symbol"}}}